<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculus Topics Mastery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Background Animation */
        @keyframes backgroundMovement {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Custom Checkbox Animation */
        @keyframes checkboxPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes fadeInSlide {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        body {
            background: linear-gradient(45deg, #e0f2fe, #bae6fd, #93c5fd);
            background-size: 400% 400%;
            animation: backgroundMovement 15s ease infinite;
            font-family: 'Inter', sans-serif;
        }

        /* Custom Checkbox Design */
        .custom-checkbox {
            position: relative;
            width: 24px;
            height: 24px;
            border: 2px solid #3b82f6;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .custom-checkbox.checked {
            background-color: #3b82f6;
            animation: checkboxPulse 0.5s ease;
        }

        .custom-checkbox::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            color: white;
            font-size: 16px;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .custom-checkbox.checked::after {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .topic-item {
            animation: fadeInSlide 0.5s ease forwards;
            opacity: 0;
            animation-delay: calc(var(--delay) * 0.1s);
        }

        .chapter-header {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .chapter-header:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body class="min-h-screen flex justify-center items-center p-4">
    <div class="w-full max-w-xl bg-white/80 backdrop-blur-lg rounded-2xl shadow-2xl p-6 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-blue-100/30 to-indigo-100/30 -z-10"></div>
        
        <h1 class="text-4xl font-extrabold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 animate-pulse">
            CALCULUS MASTERY
        </h1>

        <!-- Progress Section -->
        <div class="mb-6 space-y-3">
            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-indigo-600 h-full rounded-full transition-all duration-500 ease-in-out" style="width: 0%"></div>
            </div>
            <div class="flex justify-between text-sm font-semibold text-gray-700">
                <div id="progressText">Progress: 0%</div>
                <div id="topicCountText">Topics: 0/0</div>
            </div>
        </div>

        <!-- Topics Container -->
        <div id="topicsContainer" class="space-y-4"></div>
    </div>

    <script>
        const mathematicsTopics = [
            {
                chapter: "Differentiation",
                topics: [
                    "Successive Differentiation",
                    "Leibnitz's Rule",
                    "Indeterminate Forms",
                    "Taylor's Series",
                    "Maclaurin's Series"
                ]
            },
            {
                chapter: "Partial Differentiation and its Applications",
                topics: [
                    "Functions of two or more Variables",
                    "Limits and Continuity",
                    "Partial derivatives",
                    "Homogeneous Functions",
                    "Euler's Theorem",
                    "Total derivative",
                    "Implicit Functions",
                    "Change of Variables",
                    "Jacobians",
                    "Directional Derivatives",
                    "Gradients",
                    "Tangent Planes and Normal Lines",
                    "Taylor's Theorem for two Variables",
                    "Errors and Approximations",
                    "Maxima and Minima",
                    "Lagrange's Method of Undetermined Multipliers"
                ]
            },
            // ... (rest of the topics remain the same as in the original code)
        ];

        // Load saved topics from local storage
        let savedTopics = JSON.parse(localStorage.getItem('mathTopics')) || 
            mathematicsTopics.map(chapter => ({
                ...chapter,
                expanded: true,
                topics: chapter.topics.map(topic => ({
                    text: topic,
                    completed: false
                }))
            }));

        const topicsContainer = document.getElementById('topicsContainer');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const topicCountText = document.getElementById('topicCountText');

        function renderTopics() {
            topicsContainer.innerHTML = '';
            savedTopics.forEach((chapter, chapterIndex) => {
                const chapterElement = document.createElement('div');
                chapterElement.className = 'bg-white/80 backdrop-blur-lg rounded-xl shadow-lg overflow-hidden topic-item';
                chapterElement.style.setProperty('--delay', chapterIndex);
                
                const chapterHeader = document.createElement('div');
                chapterHeader.className = 'bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 font-bold chapter-header flex justify-between items-center cursor-pointer';
                chapterHeader.innerHTML = `
                    <span>${chapter.chapter}</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 chapter-toggle" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                            d="${chapter.expanded ? 'M5 15l7-7 7 7' : 'M19 9l-7 7-7-7'}" />
                    </svg>
                `;
                
                chapterHeader.addEventListener('click', () => {
                    chapter.expanded = !chapter.expanded;
                    renderTopics();
                    updateProgress();
                });
                chapterElement.appendChild(chapterHeader);

                if (chapter.expanded) {
                    const topicsList = document.createElement('div');
                    topicsList.className = 'p-4 space-y-2';

                    chapter.topics.forEach((topic, topicIndex) => {
                        const topicItem = document.createElement('div');
                        topicItem.className = `
                            flex items-center space-x-3 p-3 rounded-lg 
                            ${topic.completed ? 'bg-green-50' : 'hover:bg-blue-50'}
                            transition-all duration-300 cursor-pointer
                        `;
                        
                        const customCheckbox = document.createElement('div');
                        customCheckbox.className = `custom-checkbox ${topic.completed ? 'checked' : ''}`;
                        
                        const topicText = document.createElement('span');
                        topicText.textContent = topic.text;
                        topicText.className = `
                            flex-grow 
                            ${topic.completed ? 'line-through text-gray-500' : 'text-gray-800'}
                        `;

                        topicItem.addEventListener('click', () => {
                            topic.completed = !topic.completed;
                            customCheckbox.classList.toggle('checked');
                            localStorage.setItem('mathTopics', JSON.stringify(savedTopics));
                            updateProgress();
                        });

                        topicItem.appendChild(customCheckbox);
                        topicItem.appendChild(topicText);
                        topicsList.appendChild(topicItem);
                    });

                    chapterElement.appendChild(topicsList);
                }

                topicsContainer.appendChild(chapterElement);
            });
        }

        function updateProgress() {
            const allTopics = savedTopics.flatMap(chapter => chapter.topics);
            const completedTopics = allTopics.filter(topic => topic.completed);
            const progressPercentage = Math.round((completedTopics.length / allTopics.length) * 100);
            
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `Progress: ${progressPercentage}%`;
            topicCountText.textContent = `Topics: ${completedTopics.length}/${allTopics.length}`;
        }

        // Initial render and progress update
        renderTopics();
        updateProgress();
    </script>
</body>
</html>
